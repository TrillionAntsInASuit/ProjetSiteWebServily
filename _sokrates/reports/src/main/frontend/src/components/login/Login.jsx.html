<html>
<head>
    <title>frontend/src/components/login/Login.jsx</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">frontend/src/components/login/Login.jsx (<b>99</b> lines of code) (<a href="Login.jsx">raw</a>):</h3>
<div id="editor">import { useState, useContext } from &quot;react&quot;;
import { Link, useNavigate } from &quot;react-router-dom&quot;;
import &quot;./Login.css&quot;;
import { AuthContext } from &quot;../../context/auth-context.js&quot;;
import { useEffect } from &quot;react&quot;;
import { useHttpClient } from &quot;../../hooks/http-hook.js&quot;;
import { supabase } from &quot;../../../util/supabaseClient.js&quot;;
//import Spinner from &quot;../UIElements/LoadingSpinner&quot;;
import ModalMessageErreur from &quot;../UIElements/ModalMessageErreur&quot;;
//import { useTranslation } from &quot;react-i18next&quot;;
//import LanguageSwitcher from &quot;../../containers/changeLanguage.jsx&quot;;
import React from &quot;react&quot;;

export default function Login() {
  //const { t } = useTranslation();
  const auth = useContext(AuthContext);
  const [entredValues, setEntredValues] = useState({
    email: &quot;&quot;,
    password: &quot;&quot;,
  });
  const navigate = useNavigate();
  const { isLoading, error, sendRequest, clearError } = useHttpClient();

  const handleInputChange = (identifier, value) =&gt; {
    setEntredValues((prevValue) =&gt; ({
      ...prevValue,
      [identifier]: value,
    }));
  };

  useEffect(() =&gt; {
    if (auth.isLoggedIn) {
      navigate(&quot;/&quot;);
    }
  }, [auth.isLoggedIn, navigate]);

  const authSubmitHandler = async (event) =&gt; {
    event.preventDefault();
    try {
      const { data, error } = await supabase
        .from(&quot;users&quot;)
        .select(&quot;*&quot;)
        .eq(&quot;email&quot;, entredValues.email)
        .eq(&quot;password&quot;, entredValues.password);
      if (error || !data || data.length === 0) {
        alert(&quot;Invalid email or password&quot;);
        return;
      }
      const loggedInUser = data[0];
      auth.login(loggedInUser.id, &quot;dummy-token&quot;, loggedInUser.status);
      localStorage.setItem(&quot;userId&quot;, loggedInUser.id);
      localStorage.setItem(&quot;token&quot;, &quot;dummy-token&quot;);
      localStorage.setItem(&quot;userType&quot;, loggedInUser.status);
      navigate(&quot;/&quot;);
    } catch (error) {
      console.error(&quot;Login failed:&quot;, error);
    }
  };
  return (
    &lt;&gt;
      &lt;div&gt;
        {isLoading /*&amp;&amp; &lt;Spinner /&gt;*/}
        &lt;ModalMessageErreur message={error} onClose={() =&gt; clearError()} /&gt;
      &lt;/div&gt;
      &lt;form onSubmit={authSubmitHandler} className=&quot;login-form&quot;&gt;
        &lt;h1&gt;Login&lt;/h1&gt;
        &lt;h2&gt;Welcome back!&lt;/h2&gt;
        &lt;hr /&gt;
        &lt;div className=&quot;form-group__container&quot;&gt;
          &lt;div className=&quot;form-group&quot;&gt;
            &lt;input
              type=&quot;email&quot;
              id=&quot;email&quot;
              required
              placeholder=&quot;Email...&quot;
              onChange={(event) =&gt;
                handleInputChange(&quot;email&quot;, event.target.value)
              }
            /&gt;
          &lt;/div&gt;
          &lt;div className=&quot;form-group&quot;&gt;
            &lt;input
              type=&quot;password&quot;
              id=&quot;password&quot;
              required
              placeholder=&quot;Password...&quot;
              onChange={(event) =&gt;
                handleInputChange(&quot;password&quot;, event.target.value)
              }
            /&gt;
          &lt;/div&gt;

          &lt;button type=&quot;submit&quot; className=&quot;button-login&quot;&gt;
            Login
          &lt;/button&gt;
        &lt;/div&gt;
        &lt;p&gt;
          No account? &lt;Link to=&quot;/register&quot;&gt;Register&lt;/Link&gt;
        &lt;/p&gt;
        {/* &lt;LanguageSwitcher /&gt; */}
      &lt;/form&gt;
    &lt;/&gt;
  );
}
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/html");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
